<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大同大學-校內育成媒合平台</title>
    <link rel="stylesheet" href="./bootstrap-5.3.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/nav-memo2-main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.bootstrap5.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/3.0.1/css/responsive.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.css">
</head>

<body>
    <main class="main">
        <!-- 側邊攔 -->
        <nav class="nav-box no_print">
            <!-- RWD-MENU標籤 -->
            <div class="burger-menu">
                <i class="fas fa-bars"></i>
            </div>
            <!-- 側邊攔上方 -->
            <div class="top">
                <a href="#" class="navbar-logo">
                    <img src="./img/ttoLogo_2.png" class="navbar-brand">
                </a>
                <ul class="navigation navbar-top">
                    <li class="item">
                        <a class="link active" href="./nav-memo2.html"><i class="fas fa-home"></i><span
                                class="tooltiptext tooltip-right">儀錶板</span></a>
                    </li>
                    <li class="item dropend">
                        <a class="link dropdown-toggle" href="#" role="button" id="dropdownMenuLink1"
                            data-bs-toggle="dropdown" aria-expanded="false"><i class="fa-solid fa-users"></i><span
                                class="tooltiptext tooltip-right">職缺媒合</span></a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink1">
                            <li><a class="dropdown-item" href="./nav-memo2-joblist.html">職缺總攬&ensp;<i
                                        class="fa-solid fa-users-line"></i></a>
                            </li>
                            <li><a class="dropdown-item" href="./nav-memo2-myjob.html">刊登中&emsp;&ensp;<i
                                        class="fa-solid fa-users-viewfinder"></i></a></li>
                        </ul>
                    </li>
                    <li class="item dropend">
                        <a class="link dropdown-toggle" href="#" role="button" id="dropdownMenuLink3"
                            data-bs-toggle="dropdown" aria-expanded="false"><i
                                class="fa-solid fa-file-contract"></i><span
                                class="tooltiptext tooltip-right">申請與查閱</span></a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink3">
                            <li><a class="dropdown-item" href="./idcard_inventory.html">識別證管理&ensp;<i
                                        class="fa-regular fa-address-card"></i></a>
                            </li>
                            <li><a class="dropdown-item" href="./parkingspace_inventory.html">停車位管理&ensp;<i
                                        class="fa-solid fa-square-parking"></i></a>
                            </li>
                            <li><a class="dropdown-item" href="#">續約申請&emsp;&ensp;<i
                                        class="fa-solid fa-file-signature"></i></a></li>
                        </ul>
                    </li>

                    <li class="item">
                        <a class="link" href="#"><i class="fa-solid fa-spinner"></i><span
                                class="tooltiptext tooltip-right">進度查詢</span></a>
                    </li>

                    <li class="item dropend">
                        <a class="link dropdown-toggle" role="button" id="dropdownMenuLink4" data-bs-toggle="dropdown"
                            aria-expanded="false"><i class="fa-solid fa-stamp"></i><span
                                class="tooltiptext tooltip-right">資料審核</span></a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink4">
                            <li><a class="dropdown-item" href="./coopManufApp.html">廠商審核&emsp;&ensp;<i
                                        class="fa-solid fa-user-tie"></i></a>
                            </li>
                            <li><a class="dropdown-item" href="./parkingSpaceApp.html.html">車位審核&emsp;&ensp;<i
                                        class="fa-solid fa-square-parking"></i></a></li>
                            <li><a class="dropdown-item" href="#">空間審核&emsp;&ensp;<i
                                        class="fa-solid fa-building"></i></a>
                            </li>
                            <li><a class="dropdown-item" href="#">續約審核&emsp;&ensp;<i
                                        class="fa-solid fa-file-signature"></i></a></li>
                            <li><a class="dropdown-item" href="#">識別證審核&ensp;<i
                                        class="fa-regular fa-address-card"></i></a>
                            </li>
                        </ul>
                    </li>

                    <li class="item dropend">
                        <a class="link dropdown-toggle" href="#" role="button" id="dropdownMenuLink5"
                            data-bs-toggle="dropdown" aria-expanded="false"><i class="fa-solid fa-briefcase"></i><span
                                class="tooltiptext tooltip-right">資料管理</span></a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink5">
                            <li><a class="dropdown-item" href="./cultivationRoom.html">培育室管理&emsp;&ensp;<i
                                        class="fa-solid fa-tree-city"></i></a></li>
                            <li><a class="dropdown-item" href="#">停車位管理&emsp;&ensp;<i
                                        class="fa-brands fa-product-hunt"></i></a></li>
                            <li><a class="dropdown-item" href="./nav-memo2-roles.html">用戶權限設定&ensp;<i
                                        class="fa-solid fa-people-robbery"></i></a></li>
                            <li><a class="dropdown-item" href="#">用戶資料修改&ensp;<i
                                        class="fa-solid fa-address-book"></i></a>
                            </li>
                        </ul>
                    </li>

                    <li class="item">
                        <a class="link" href="#"><i class="fa-solid fa-file-shield"></i><span
                                class="tooltiptext tooltip-right">LOG紀錄</span></a>
                    </li>
                    <li class="item">
                        <a class="link" href="#"><i class="fa-regular fa-paper-plane"></i><span
                                class="tooltiptext tooltip-right">意見反應</span></a>
                    </li>
                    <li class="item">
                        <a class="link" href="stylePage.html"><i class="fa-solid fa-paint-roller"></i><span
                                class="tooltiptext tooltip-right">樣式設計</span></a>
                    </li>

                    <li class="item">
                        <a class="link" href="underConstruction.html"><i class="fa-solid fa-person-digging"></i><span
                                class="tooltiptext tooltip-right">施工頁</span></a>
                    </li>
                </ul>

            </div>
            <!-- 側邊攔下方 -->
            <div class="bottom">
                <ul class="navigation">
                    <!-- 已登入 -->
                    <li class="item dropend">
                        <a class="link dropdown-toggle" href="#" role="button" id="dropdownMenuLink9"
                            data-bs-toggle="dropdown" aria-expanded="false"><i
                                class="fa-regular fa-circle-user"></i></a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink9">
                            <li><a class="dropdown-item" href="#">設定&ensp;<i class="fa-solid fa-gear"></i></a></li>
                            <li><a class="dropdown-item" href="#">登出&ensp;<i class="fa-solid fa-door-open"></i></a></li>
                        </ul>
                    </li>
                    <!-- 未登入 -->
                    <!-- <li class="item">
                        <a class="link" href="./nav-memo2-login.html"><i class="fa-regular fa-circle-user"></i><span
                                class="tooltiptext tooltip-right">登入&ensp;/&ensp;申請</span></a>
                    </li> -->
                </ul>
            </div>
        </nav>
        <div class="content">
            <div class="container">
                <!-- 麵包屑 -->
                <div class="breadcrumb-box section-padding section-border-radius my-2r no_print">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><i class="fa-solid fa-file-contract"></i>&ensp;申請與查閱</li>
                        <li class="breadcrumb-item"><a class="d-inline"><i
                                    class="fa-solid fa-square-parking"></i>&ensp;停車位管理</a></li>
                        <li class="breadcrumb-item active"><i class="fa-solid fa-car-side"></i>&nbsp;<i
                                class="fa-solid fa-motorcycle"></i>&ensp;停車位申請</li>
                    </ol>
                </div>
                <div class="no_print">
                    <!-- 職缺列表 -->
                    <div class="tabs-box my-2r no_print">
                        <h3 class="section-header"><i class="fa-solid fa-quote-left"></i>申請人資料<i
                                class="fa-solid fa-quote-right"></i></h3>
                        <div class="tabs section-border-radius section-padding">
                            <form class="container-fluid" method="post">
                                <div class="row">
                                    <div class="col-xl-4 mb-3">
                                        <div class="row mb-3">
                                            <label for="parkingSpaceName"
                                                class="col-lg-auto col-form-label text-nowrap"><span
                                                    class="d-none d-lg-inline">&emsp;</span>姓名：</label>
                                            <div class="col">
                                                <input type="text" class="form-control" id="parkingSpaceName"
                                                    asp-for="parkingSpace_Name">
                                                <span asp-validation-for="parkingSpace_Name" class="text-danger"></span>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <label for="parkingSpaceJobName"
                                                class="col-lg-auto col-form-label text-nowrap"
                                                asp-for="parkingSpace_JobName"><span
                                                    class="d-none d-lg-inline">&emsp;</span>職稱：</label>
                                            <div class="col">
                                                <input type="text" class="form-control" id="parkingSpaceJobName"
                                                    asp-for="parkingSpace_JobName">
                                                <span asp-validation-for="parkingSpace_JobName"
                                                    class="text-danger"></span>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <label for="parkingSpaceExt" class="col-lg-auto col-form-label text-nowrap"
                                                asp-for="parkingSpace_Ext"><span
                                                    class="d-none d-lg-inline">&emsp;</span>分機：</label>
                                            <div class="col">
                                                <input type="text" class="form-control" id="parkingSpaceExt"
                                                    asp-for="parkingSpace_Ext">
                                                <span asp-validation-for="parkingSpace_Ext" class="text-danger"></span>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <label for="parkingSpacePhone"
                                                class="col-lg-auto col-form-label text-nowrap"
                                                asp-for="parkingSpace_Phone"><span
                                                    class="d-none d-lg-inline">&emsp;</span>電話：</label>
                                            <div class="col">
                                                <input type="text" class="form-control" id="parkingSpacePhone"
                                                    asp-for="parkingSpace_Phone">
                                                <span asp-validation-for="parkingSpace_Phone"
                                                    class="text-danger"></span>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <label for="parkingSpaceEmail"
                                                class="col-lg-auto col-form-label text-nowrap"
                                                asp-for="parkingSpace_Email">E-mail：</label>
                                            <div class="col">
                                                <input type="text" class="form-control" id="parkingSpaceEmail"
                                                    asp-for="parkingSpace_Email">
                                                <span asp-validation-for="parkingSpace_Email"
                                                    class="text-danger"></span>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <label for="parkingSpaceIDNum"
                                                class="col-lg-auto col-form-label text-nowrap"
                                                asp-for="parkingSpace_IDNum">身分證字號：</label>
                                            <div class="col">
                                                <input type="text" class="form-control" id="parkingSpaceIDNum"
                                                    asp-for="parkingSpace_IDNum">
                                                <span asp-validation-for="parkingSpace_IDNum"
                                                    class="text-danger"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-8 mb-3">
                                        <div class="row mb-3">
                                            <label for="upload_img"
                                                class="col-auto col-form-label text-nowrap">上傳行照內頁：</label>
                                            <div class="col col-sm-auto">
                                                <label id="car_upload_label" class="btn btn-outline-secondary">
                                                    <input id="upload_car_img" type="file" accept="image/*"
                                                        class="d-none">
                                                    <i class="fa-solid fa-car mx-1"></i>行照
                                                </label>
                                            </div>
                                            <div class="col">
                                                <label id="bike_upload_label" class="btn btn-outline-secondary">
                                                    <input id="upload_moto_img" type="file" accept="image/*"
                                                        class="d-none"><i class="fa-solid fa-motorcycle mx-1"></i>行照
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div id="croppie-container" class="mb-3"></div>
                                        </div>
                                        <div class="row mb-3 justify-content-around">
                                            <button id="crop_img" class="btn btn-secondary col-auto"><i
                                                    class="fa-solid fa-scissors"></i>&ensp;裁剪圖片</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="row p-3 justify-content-center">
                                    <div class="col-12 fw-bold  ">申請人聲明：</div>
                                    <div class="col-12">
                                        <div class="row ms-3">
                                            <div class="col-auto">1.</div>
                                            <div class="col">
                                                本份資料均填寫屬實，進駐大同大學期間，願意完全遵守大同大學有關人事及校園安全規定條則，並不得任意使用大同大學名稱，如有違背，將立即喪失進駐資格，並歸還任何大同大學所核發校園出入等相關證件與權限。
                                            </div>
                                        </div>
                                        <div class="row ms-3">
                                            <div class="col-auto">2.</div>
                                            <div class="col">此為出入停車場並停放車輛與指定位置之用，不作其他識別用途。</div>
                                        </div>
                                        <div class="row ms-3">
                                            <div class="col-auto">3.</div>
                                            <div class="col text-decoration-underline fw-bold">印出申請書並簽名後，繳費完後交至<span
                                                    class="fw-bold text-danger">大同大學研發處</span>，才算申請完成喔！</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row text-center p-3 justify-content-center">
                                    <div class="col-auto">
                                        <button type="reset" class="btn btn-lg btn-outline-danger">重填</button>
                                    </div>
                                    <div class="col-auto">
                                        <!-- <button type="button" class="btn btn-lg btn-outline-info" data-bs-toggle="modal"
                                            data-bs-target="#parkingSpaceApp_pdf"
                                            id="confirm_parkingSpaceApp">預覽</button> -->
                                        <button type="button" class="btn btn-lg btn-outline-info"
                                            id="confirm_parkingSpaceApp">預覽</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- Modal -->
                    <div class="modal fade" id="parkingSpaceApp_pdf" tabindex="-1"
                        aria-labelledby="parkingSpaceApp_pdfLabel" data-bs-backdrop="static" data-bs-keyboard="false"
                        aria-hidden="true">
                        <div class="modal-dialog modal-xl">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="parkingSpaceApp_pdfLabel"><i
                                            class="fa-regular fa-file-pdf me-2"></i>申請書預覽
                                    </h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body-wrapper">
                                    <div class="modal-body">
                                        <div class="table-responsive px-5">
                                            <div class="row align-items-center justify-content-center mb-2 modal-minW">
                                                <div class="col-auto title_imgBox"><img src="./img/ttulogo.png"></div>
                                                <h3 class="col-auto text-center fw-bold text-nowrap mb-0">
                                                    大同大學新德惠汽車停車場停車位申請單
                                                </h3>
                                            </div>
                                            <div class="my-3 fs-5">主管簽名：</div>
                                            <table
                                                class="table table-bordered align-middle border border-3 border-dark modal-minW print_table">
                                                <tr>
                                                    <td rowspan="2" class="fw-bold  text-center w-15">單位</td>
                                                    <td class="">好棒棒股份有限公司</td>
                                                    <td rowspan="2" class="fw-bold  text-center w-15">停車位<br>編&emsp;號
                                                    </td>
                                                    <td class="fw-bold  text-center w-35">
                                                        地下&emsp;&emsp;樓</td>
                                                </tr>
                                                <tr>
                                                    <td class="">培育廠商</td>
                                                    <td class="fw-bold  text-center">
                                                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;號</td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold  text-nowrap text-center px-4">職&emsp;稱
                                                    </td>
                                                    <td id="parkingSpaceJobName_td"></td>
                                                    <td class="fw-bold  text-nowrap text-center">聯絡電話</td>
                                                    <td id="parkingSpacePhone_td"></td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold  text-nowrap text-center">姓&emsp;名</td>
                                                    <td id="parkingSpaceName_td"></td>
                                                    <td class="fw-bold text-nowrap text-center">分&emsp;機</td>
                                                    <td id="parkingSpaceExt_td"></td>
                                                </tr>
                                                <tr>
                                                    <td class="fw-bold text-nowrap text-center">身份證<br>統一編號</td>
                                                    <td id="parkingSpaceIDNum_td"></td>
                                                    <td class="fw-bold text-nowrap text-center">電子信箱</td>
                                                    <td id="parkingSpaceEmail_td"></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4" class="fw-bold px-3 py-1">行照內頁
                                                        <div id="newImg"></div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td rowspan="4" class="fw-bold fs-4 text-nowrap text-center">
                                                        備<br><br>註</td>
                                                    <td colspan="3" class="">

                                                        <div class="row">
                                                            <div class="col-auto pe-0">一、</div>
                                                            <div class="col">申請單各欄應詳填，並附行車執照內頁影本一份。</div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-auto pe-0">二、</div>
                                                            <div class="col">行車執照內頁，如車主姓名非申請人或其配偶，請速向監理單位辦理
                                                                車主變更，否則即由次位遞補，敬請配合。</div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-auto pe-0">三、</div>
                                                            <div class="col">如因離調異動請通知，以便更正資料或安排候補車位，如因車輛資料
                                                                異動請補附行車執照內頁影本送總務處浮貼，據以辦理更正。</div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-auto pe-0">四、</div>
                                                            <div class="col">如有空位時依據候補申請單順序發證。</div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                            <div class="row my-3 modal-minW">
                                                <!-- <div class="col-12">申請流程：</div> -->
                                                <div class="ms-2 col-12">
                                                    &emsp;&emsp;申請流程：填寫申請單→單位主管簽名→繳費→上傳繳費證明→總務處(收件)</div>
                                                <div class="ms-2 col-12">
                                                    &emsp;&emsp;學校總務處承辦人：事務組陳朝宗　聯絡電話：3460,2350分機</div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-outline-dark"
                                        data-bs-dismiss="modal">關閉</button>
                                    <button type="button" class="btn btn-primary print"
                                        id="printIdCard">列印並送出申請</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TOP -->
                <div class="top_button no_print">
                    <a id="btn_up"><img src="./img/TOP_LOGO_3.png" alt=""></a>
                </div>
                <!-- 頁尾 -->
                <div class="footer section-padding section-border-radius my-2r no_print">
                    <ul class="links">
                        <li><a href="#">大同大學</a></li>
                        <li><a href="./nav-memo2-joblist.html">育成媒合</a></li>
                        <li><a href="./nav-memo2.html">帳戶總攬</a></li>
                    </ul>
                    <p class="copyright">
                        大同大學 版權所有&copy;2022 All Rights Reserved.<br>建議使用：IE9.0以上版本或Google
                        Chrome瀏覽器<span>(最佳螢幕解析1280*1024)</span>
                    </p>
                </div>

            </div>
        </div>
    </main>
    <section class="print_template"></section>


    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="./bootstrap-5.3.3-dist/js/bootstrap.bundle.js"></script>
    <script src="https://cdn.datatables.net/2.0.3/js/dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.3/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/3.0.1/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/3.0.1/js/responsive.bootstrap5.min.js"></script>
    <script src="./js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js"></script>
    <script>
        $(document).on("click", ".print", function () {
            const section = $("section");
            const modalBody = $(".modal-body").detach();
            section.append(modalBody);
            window.print();
            section.empty();
            $(".modal-body-wrapper").append(modalBody);
        });


        // $(function () {
        //     var width_crop = 529; // 裁切寬度
        //     var height_crop = 360; // 裁切高度
        //     var croppieContainer = $('#croppie-container');
        //     $("#croppie-container").hide();

        //     // 初始化 Croppie 实例
        //     var croppie = new Croppie(croppieContainer[0], {
        //         viewport: {
        //             width: width_crop,
        //             height: height_crop,
        //             type: 'square' // 裁剪形状，这里设置为正方形
        //         },
        //         boundary: {
        //             width: 600, // 根据需要调整边界宽度
        //             height: 400 // 根据需要调整边界高度
        //         },
        //         enableResize: false, // 不允许调整裁剪框大小
        //         enableOrientation: true // 允许调整方向
        //     });

        //     // 处理文件选择
        //     $('#upload_img').on('change', function () {
        //         $("#croppie-container").show();
        //         var reader = new FileReader();
        //         reader.onload = function (e) {
        //             croppie.bind({
        //                 url: e.target.result
        //             });
        //         };
        //         reader.readAsDataURL(this.files[0]);
        //     });

        //     // 处理裁剪按钮点击事件
        //     $('#crop_img').on('click', function (event) {
        //         event.preventDefault(); // 阻止默认行为，防止表单提交

        //         croppie.result({
        //             type: 'canvas',
        //             size: { width: width_crop, height: height_crop },
        //             format: 'jpeg', // 指定输出格式
        //             quality: 0.85 // 指定压缩质量
        //         }).then(function (imgData) {
        //             displayCroppedImage(imgData);
        //             // 添加 data-bs-toggle 和 data-bs-target 属性
        //             $('#confirm_parkingSpaceApp').attr('data-bs-toggle', 'modal').attr('data-bs-target', '#parkingSpaceApp_pdf');
        //         });
        //     });

        //     // 显示裁剪后的图片
        //     function displayCroppedImage(imgData) {
        //         $('#newImg').html('<img src="' + imgData + '" class="img-thumbnail">');
        //     }

        //     // 处理确认按钮点击事件
        //     $('#confirm_parkingSpaceApp').on('click', function (event) {
        //         if (!$(this).attr('data-bs-toggle') || !$(this).attr('data-bs-target')) {
        //             event.preventDefault(); // 阻止默认行为
        //             alert("請先上傳行照內頁並裁剪至指定大小");
        //         }
        //     });
        // });


        // JavaScript
        // $(function () {
        //     var width_crop = 529; // 默認裁切寬度
        //     var height_crop = 360; // 裁切高度
        //     var croppieContainer = $('#croppie-container');
        //     $("#croppie-container").hide();

        //     var croppie = null;

        //     // 初始化 Croppie 实例
        //     function initializeCroppie() {
        //         croppie = new Croppie(croppieContainer[0], {
        //             viewport: {
        //                 width: width_crop,
        //                 height: height_crop,
        //                 type: 'square'
        //             },
        //             boundary: {
        //                 width: 600,
        //                 height: 400
        //             },
        //             enableResize: false,
        //             enableOrientation: true
        //         });
        //     }

        //     // 处理文件选择
        //     function handleFileSelect(input) {
        //         $("#croppie-container").show();
        //         var reader = new FileReader();
        //         reader.onload = function (e) {
        //             croppie.bind({
        //                 url: e.target.result
        //             });
        //         };
        //         reader.readAsDataURL(input.files[0]);
        //     }

        //     $('#upload_car_img').on('change', function () {
        //         width_crop = 529;
        //         height_crop = 360;
        //         if (croppie) {
        //             croppie.destroy();
        //         }
        //         initializeCroppie();
        //         handleFileSelect(this);
        //     });

        //     $('#upload_bike_img').on('change', function () {
        //         width_crop = 264;
        //         height_crop = 360;
        //         if (croppie) {
        //             croppie.destroy();
        //         }
        //         initializeCroppie();
        //         handleFileSelect(this);
        //     });

        //     $('#upload_car_img').on('click', function () {
        //         $('#bike_upload_label').hide();
        //     });

        //     $('#upload_bike_img').on('click', function () {
        //         $('#car_upload_label').hide();
        //     });

        //     $('#crop_img').on('click', function (event) {
        //         event.preventDefault();

        //         croppie.result({
        //             type: 'canvas',
        //             size: { width: width_crop, height: height_crop },
        //             format: 'jpeg',
        //             quality: 0.85
        //         }).then(function (imgData) {
        //             displayCroppedImage(imgData);
        //             $('#confirm_parkingSpaceApp').attr('data-bs-toggle', 'modal').attr('data-bs-target', '#parkingSpaceApp_pdf');
        //         });
        //     });

        //     function displayCroppedImage(imgData) {
        //         $('#newImg').html('<img src="' + imgData + '" class="img-thumbnail">');
        //     }

        //     $('#confirm_parkingSpaceApp').on('click', function (event) {
        //         if (!$(this).attr('data-bs-toggle') || !$(this).attr('data-bs-target')) {
        //             event.preventDefault();
        //             alert("請先上傳行照內頁並裁剪至指定大小");
        //         }
        //     });
        // });

        //上傳照片並裁切指定大小



        // $(function () {
        //     var car_width_crop = 529; // 汽車裁切寬度
        //     var car_height_crop = 360; // 汽車裁切高度
        //     var bike_width_crop = car_width_crop / 2; // 機車裁切寬度
        //     var bike_height_crop = car_height_crop; // 機車裁切高度與汽車相同
        //     var croppieContainer = $('#croppie-container');
        //     $("#croppie-container").hide();
        //     $('#crop_img').hide();

        //     var croppie = null;
        //     var currentMode = 'car'; // 初始模式为汽車

        //     // 初始化 Croppie 实例
        //     function initializeCroppie(width_crop, height_crop) {
        //         croppie = new Croppie(croppieContainer[0], {
        //             viewport: {
        //                 width: width_crop,
        //                 height: height_crop,
        //                 type: 'square'
        //             },
        //             boundary: {
        //                 width: 500,
        //                 height: 400
        //             },
        //             enableResize: false,
        //             enableOrientation: true
        //         });
        //     }

        //     // 处理文件选择
        //     function handleFileSelect(input, width_crop, height_crop) {
        //         $("#croppie-container").show();
        //         var reader = new FileReader();
        //         reader.onload = function (e) {
        //             croppie.bind({
        //                 url: e.target.result
        //             });
        //         };
        //         reader.readAsDataURL(input.files[0]);
        //     }

        //     $('#upload_car_img').on('change', function () {
        //         currentMode = 'car';
        //         if (croppie) {
        //             croppie.destroy();
        //         }
        //         initializeCroppie(car_width_crop, car_height_crop);
        //         handleFileSelect(this, car_width_crop, car_height_crop);
        //     });

        //     $('#upload_moto_img').on('change', function () {
        //         currentMode = 'bike';
        //         if (croppie) {
        //             croppie.destroy();
        //         }
        //         initializeCroppie(bike_width_crop, bike_height_crop);
        //         handleFileSelect(this, bike_width_crop, bike_height_crop);
        //     });

        //     $('#upload_car_img').on('click', function () {
        //         $('#bike_upload_label').hide();
        //         $('#car_upload_label').show();
        //         $('#crop_img').show();
        //     });

        //     $('#upload_moto_img').on('click', function () {
        //         $('#car_upload_label').hide();
        //         $('#bike_upload_label').show();
        //         $('#crop_img').show();
        //     });

        //     $('#crop_img').on('click', function (event) {
        //         event.preventDefault();

        //         var width_crop = currentMode === 'car' ? car_width_crop : bike_width_crop;
        //         var height_crop = currentMode === 'car' ? car_height_crop : bike_height_crop;

        //         croppie.result({
        //             type: 'canvas',
        //             size: { width: width_crop, height: height_crop },
        //             format: 'jpeg',
        //             quality: 0.85
        //         }).then(function (imgData) {
        //             displayCroppedImage(imgData, currentMode);
        //             $('#confirm_parkingSpaceApp').attr('data-bs-toggle', 'modal').attr('data-bs-target', '#parkingSpaceApp_pdf');
        //         });
        //     });

        //     function displayCroppedImage(imgData, mode) {
        //         var width = mode === 'car' ? '100%' : '50%';
        //         $('#newImg').html('<img src="' + imgData + '" class="img-thumbnail" style="width: ' + width + ';">');
        //     }

        //     $('#confirm_parkingSpaceApp').on('click', function (event) {
        //         if (!$(this).attr('data-bs-toggle') || !$(this).attr('data-bs-target')) {
        //             event.preventDefault();
        //             alert("請先上傳行照內頁並裁剪至指定大小");
        //         }
        //     });

        // });




        // 指定輸入框代入預覽燈箱

        $(function () {
            var car_width_crop = 529; // 汽车裁切宽度
            var car_height_crop = 360; // 汽车裁切高度
            var bike_width_crop = car_width_crop / 2; // 机车裁切宽度为汽车裁切宽度的一半
            var bike_height_crop = car_height_crop; // 机车裁切高度与汽车相同
            var croppieContainer = $('#croppie-container');
            $("#croppie-container").hide();
            $('#crop_img').hide();

            var croppie = null;
            var currentMode = null; // 初始模式为空

            // 初始化 Croppie 实例
            function initializeCroppie(width_crop, height_crop) {
                croppie = new Croppie(croppieContainer[0], {
                    viewport: {
                        width: width_crop,
                        height: height_crop,
                        type: 'square'
                    },
                    boundary: {
                        width: 500,
                        height: 400
                    },
                    enableResize: false,
                    enableOrientation: true
                });
            }

            // 处理文件选择
            function handleFileSelect(input, width_crop, height_crop) {
                $("#croppie-container").show();
                if (!croppie) {
                    initializeCroppie(width_crop, height_crop);
                }
                var reader = new FileReader();
                reader.onload = function (e) {
                    croppie.bind({
                        url: e.target.result
                    });
                };
                reader.readAsDataURL(input.files[0]);
            }

            // 重置函数，恢复到初始状态
            function resetToInitialState() {
                if (croppie) {
                    croppie.destroy();
                    croppie = null; // 销毁 Croppie 实例并置为 null
                }
                croppieContainer.hide();
                $('#crop_img').hide();
                $('#newImg').html('');
                $('#car_upload_label').show();
                $('#bike_upload_label').show();
                $('#confirm_parkingSpaceApp').removeAttr('data-bs-toggle').removeAttr('data-bs-target');
            }

            $('#upload_car_img').on('change', function () {
                currentMode = 'car';
                resetToInitialState();
                handleFileSelect(this, car_width_crop, car_height_crop);
                $('#bike_upload_label').hide();
                $('#car_upload_label').show();
                $('#crop_img').show();
            });

            $('#upload_moto_img').on('change', function () {
                currentMode = 'bike';
                resetToInitialState();
                handleFileSelect(this, bike_width_crop, bike_height_crop);
                $('#car_upload_label').hide();
                $('#bike_upload_label').show();
                $('#crop_img').show();
            });

            $('#crop_img').on('click', function (event) {
                event.preventDefault();

                var width_crop = currentMode === 'car' ? car_width_crop : bike_width_crop;
                var height_crop = currentMode === 'car' ? car_height_crop : bike_height_crop;

                croppie.result({
                    type: 'canvas',
                    size: { width: width_crop, height: height_crop },
                    format: 'jpeg',
                    quality: 0.85
                }).then(function (imgData) {
                    displayCroppedImage(imgData, currentMode);
                    $('#confirm_parkingSpaceApp').attr('data-bs-toggle', 'modal').attr('data-bs-target', '#parkingSpaceApp_pdf');
                });
            });

            function displayCroppedImage(imgData, mode) {
                var width = mode === 'car' ? '100%' : '50%';
                $('#newImg').html('<img src="' + imgData + '" class="img-thumbnail" style="width: ' + width + ';">');
            }

            $('#confirm_parkingSpaceApp').on('click', function (event) {
                if (!$(this).attr('data-bs-toggle') || !$(this).attr('data-bs-target')) {
                    event.preventDefault();
                    alert("請先上傳行照內頁並裁剪至指定大小");
                }
            });

            // 处理重填按钮点击事件
            $('button[type="reset"]').on('click', function () {
                resetToInitialState();
            });
        });




        function syncInputToTd(inputId, tdId) {
            var inputElement = $('#' + inputId);
            var tdElement = $('#' + tdId);

            inputElement.on('input', function () {
                var inputValue = $(this).val();
                tdElement.text(inputValue);
            });
        }

        $(function () {

            // 调用函数，传入 input 和 td 的 ID
            syncInputToTd('parkingSpaceName', 'parkingSpaceName_td');
            syncInputToTd('parkingSpaceJobName', 'parkingSpaceJobName_td');
            syncInputToTd('parkingSpacePhone', 'parkingSpacePhone_td');
            syncInputToTd('parkingSpaceIDNum', 'parkingSpaceIDNum_td');
            syncInputToTd('parkingSpaceEmail', 'parkingSpaceEmail_td');
            syncInputToTd('parkingSpaceExt', 'parkingSpaceExt_td');



        });

    </script>
    <!-- <script>
        $(document).on("click", ".print", function () {
            const section = $("section");
            const modalBody = $(".modal-body").detach();
            section.append(modalBody);
            window.print();
            section.empty();
            $(".modal-body-wrapper").append(modalBody);
        });

        $(function () {
            var width_crop = 300, // 圖片裁切寬度 px 值
                height_crop = 200, // 圖片裁切高度 px 值
                type_crop = "square", // 裁切形狀: square 為方形, circle 為圓形
                width_preview = 350, // 預覽區塊寬度 px 值
                height_preview = 350, // 預覽區塊高度 px 值
                compress_ratio = 0.85, // 圖片壓縮比例 0~1
                type_img = "jpeg", // 圖檔格式 jpeg png webp
                oldImg = new Image(),
                myCrop, file, oldImgDataUrl;
            // 裁切初始參數設定
            myCrop = $("#oldImg").croppie({
                viewport: { // 裁切區塊
                    width: width_crop,
                    height: height_crop,
                    type: type_crop
                },
                boundary: { // 預覽區塊
                    width: width_preview,
                    height: height_preview
                }
            });

            function readFile(input) {
                if (input.files && input.files[0]) {
                    file = input.files[0];
                } else {
                    alert("瀏覽器不支援此功能！建議使用最新版本 Chrome");
                    return;
                }

                if (file.type.indexOf("image") == 0) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        oldImgDataUrl = e.target.result;
                        oldImg.src = oldImgDataUrl; // 載入 oldImg 取得圖片資訊
                        myCrop.croppie("bind", {
                            url: oldImgDataUrl
                        });
                    };

                    reader.readAsDataURL(file);
                } else {
                    alert("您上傳的不是圖檔！");
                }
            }

            function displayCropImg(src) {
                var html = "<img src='" + src + "' />";
                $("#newImg").html(html);
            }

            $("#upload_img").on("change", function () {
                $("#oldImg").show();
                readFile(this);
            });

            oldImg.onload = function () {
                var width = this.width,
                    height = this.height,
                    fileSize = Math.round(file.size / 1000),
                    html = "";

                html += "<p>原始圖片尺寸 " + width + "x" + height + "</p>";
                html += "<p>檔案大小約 " + fileSize + "k</p>";
                $("#oldImg").before(html);
            };

            function displayNewImgInfo(src) {
                var html = "",
                    filesize = src.length * 0.75;

                html += "<p>裁切圖片尺寸 " + width_crop + "x" + height_crop + "</p>";
                html += "<p>檔案大小約 " + Math.round(filesize / 1000) + "k</p>";
                $("#newImgInfo").html(html);
            }

            $("#crop_img").on("click", function () {
                myCrop.croppie("result", {
                    type: "canvas",
                    format: type_img,
                    quality: compress_ratio
                }).then(function (src) {
                    displayCropImg(src);
                    displayNewImgInfo(src);
                });
            });
        });

    </script> -->
</body>

</html>